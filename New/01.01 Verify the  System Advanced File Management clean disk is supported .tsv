*Setting*	*Value*	*Value*	*Value*	*Value*	*Value*	*Value*	*Value*
Resource	../Resource/CM_Resource.tsv
Resource	../Resource/SSH_Resource.tsv
Suite Setup	Run Keywords	Fetch_CM_Token
Suite Teardown	Cleaning environments
Force Tags	rw

*Variable*	*Value*	*Value*	*Value*	*Value*	*Value*	*Value*	*Value*
@{int_validation}	x	中文
# ${data}=	{"entries":[{"int_val":365,"name":"elog","enabled":true,"due_time":"18:00", "int_unit":"days","id":1},{"int_val":54,"name":"jobevent","enabled":true,"due_time":"18:00", "int_unit":"weeks","id":2}, {"int_val":12,"name":"backup","enabled":true,"due_time":"18:00","int_unit":"months","id":3}]}
# @{int_val}	1	365	999	1000	-1	x	中文
# @{int_val}	1	365	999	1000
@{int_val}	${1}	${365}	${999}
@{name}	elog	jobevent	backup
${is_enable}	True
@{due_time}	23:00	18:00	00:00
@{id}	${1}	${2}	${3}
@{int_unit}	days	weeks	months
${data}	{"entries":[{"int_val":365,"name":"elog","enabled":true,"due_time":"18:00", "int_unit":"days","id":1},{"int_val":54,"name":"jobevent","enabled":true,"due_time":"18:00", "int_unit":"weeks","id":2}, {"int_val":12,"name":"backup","enabled":true,"due_time":"18:00","int_unit":"months","id":3}]}

###	root@fortiwebcm:/var/log/fwbcm# pwd
###	/var/log/fwbcm
###	root@fortiwebcm:/var/log/fwbcm# tail -F celery-beat.log
###	root@fortiwebcm:/var/log/fwbcm# grep clean_expire_rec_files *

*Test Case*	*Action*	 *Argument*	*Argument*	*Argument*	*Argument*	*Argument*	*Argument*
## Failed. When push config, it does not recognized the Administrative Doma has been enabled
## No config need to push!

# [
#     {
#         "int_val": 365,
#         "name": "elog",
#         "enabled": true,
#         "due_time": "00:00",
#         "int_unit": "days",
#         "id": 1
#     },
#     {
#         "int_val": 365,
#         "name": "jobevent",
#         "enabled": true,
#         "due_time": "00:00",
#         "int_unit": "days",
#         "id": 2
#     },
#     {
#         "int_val": 365,
#         "name": "backup",
#         "enabled": true,
#         "due_time": "00:00",
#         "int_unit": "days",
#         "id": 3
#     }
# ]

001  Verify the Events logs can be set in Days
	# POST	/api/v1/system/maintenance/clean/	{"entries":[{"int_val":333,"name":"backup","enabled":true,"due_time":"18:00","int_unit":"days","id":3}, {}, {}]}
	POST	/api/v1/system/maintenance/clean/	${data}
	Log to Console	${\n}${int_val[2]}${\n}${resp.json()["err"]}
	Response Code Should Be	200

002  Verify the Events logs can be set in Weeks
	POST	/api/v1/system/maintenance/clean/	{"entries":[{"int_val":365,"name":"elog","enabled":true,"due_time":"18:00","int_unit":"weeks","id":1}, {}, {}]}
	Response Code Sholud Be	200

003  Verify the Events logs can be set in Months
	POST	/api/v1/system/maintenance/clean/	{"entries":[{"int_val":365,"name":"elog","enabled":true,"due_time":"18:00","int_unit":"months","id":1}, {}, {}]}
	Response Code Sholud Be	200

004  Verify the Events logs can be scheduled daily at a time

005  Verify the Events logs only accept integers less than 999

101  Verify the Job Events can be set in Days

102  Verify the Job Events can be set in Weeks

103  Verify the Job Events can be set in Months

104  Verify the Job Events can be scheduled daily at a time

105  Verify the Job Events only accept integers less than 999

201  Verify the Backup config can be set in Days

202  Verify the Backup config can be set in Weeks

203  Verify the Backup config can be set in Months

204  Verify the Backup config can be scheduled daily at a time

205  Verify the Backup config only accept integers less than 999

301  Verify the empty data will not cause any isue
	POST	/api/v1/system/maintenance/clean/	{"entries":[{}, {}, {}]}
	Response Code Should Be	200
	Last Elog Sholud Contain	Setting Clean Entries succeeded
	GET	/api/v1/system/maintenance/clean/
	Response Code Should Be	200
	${get_data}	Set Variable	${resp.json()}
	Log to Console	${\n}--${get_data}
	Should Be True	0	Get length	${get_data}

302  Verify the integers

# 666  Verify the empty data will not cause any isue
# 	:FOR 	${int}	IN RANGE	1	9
# 		POST	/api/v1/system/maintenance/clean/	{"entries":[{"int_val":"${int}","name":"backup","enabled":true,"due_time":"18:00","int_unit":"days","id":3}, {}, {}]}



*Keyword*	*Action*	*Argument*	*Argument*	*Argument*	*Argument*	*Argument*	*Argument*


Cleaning environments
	Sleep	1
